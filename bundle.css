/* --- START OF THEME DEFINITION --- */
:root {
  /* Expressive Palette (Example - would be dynamic in real Material You) */
  /* Primary Tones (e.g., from a vibrant teal/blue wallpaper) */
  --md-sys-color-primary: #69ddff; /* Bright, energetic primary */
  --md-sys-color-on-primary: #003543; /* Text/icon on primary */
  --md-sys-color-primary-container: #004d61; /* Container using primary */
  --md-sys-color-on-primary-container: #bde9ff; /* Text/icon on primary container */

  /* Secondary Tones (e.g., a complementary or analogous color) */
  --md-sys-color-secondary: #b3c9d6;
  --md-sys-color-on-secondary: #1f333c;
  --md-sys-color-secondary-container: #354953;
  --md-sys-color-on-secondary-container: #cfe5f2;

  /* Tertiary Tones (Accent) */
  --md-sys-color-tertiary: #c9bfff;
  --md-sys-color-on-tertiary: #302b47;
  --md-sys-color-tertiary-container: #47425f;
  --md-sys-color-on-tertiary-container: #e6deff;

  /* Neutral Tones (Backgrounds, Surfaces) */
  --md-sys-color-background: #191c1e; /* Deep, calm background */
  --md-sys-color-on-background: #e1e3e5; /* Text/icon on background */
  --md-sys-color-surface: #1f2428; /* Slightly lighter surface for cards, dialogs */
  --md-sys-color-on-surface: #e1e3e5; /* Text/icon on surface */
  --md-sys-color-surface-variant: #3f484d; /* A different surface variant */
  --md-sys-color-on-surface-variant: #bfc8ce; /* Text/icon on surface variant */
  --md-sys-color-outline: #899297; /* Outlines, dividers */
  --md-sys-color-shadow: #000000;

  /* Utility */
  --md-sys-color-scrim: rgba(0, 0, 0, 0.65); /* Scrim for overlays */
  --md-sys-color-inverse-surface: #e1e3e5;
  --md-sys-color-inverse-on-surface: #2e3133;

  /* Typography */
  --md-sys-font-family-brand: "Google Sans", "Roboto", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  --md-sys-font-family-plain: "Roboto", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

  /* Shape */
  --md-sys-shape-corner-none: 0px;
  --md-sys-shape-corner-extra-small: 4px;
  --md-sys-shape-corner-small: 8px;
  --md-sys-shape-corner-medium: 12px;
  --md-sys-shape-corner-large: 16px; /* Or even 20px for more "expressive" */
  --md-sys-shape-corner-extra-large: 28px; /* Key for expressive dialogs/cards */
  --md-sys-shape-corner-full: 9999px; /* Pill shapes */

  /* Elevation (Example Levels) */
  --md-sys-elevation-level-0: none;
  --md-sys-elevation-level-1: 0px 1px 3px 1px rgba(0,0,0,.15), 0px 1px 2px 0px rgba(0,0,0,.3);
  --md-sys-elevation-level-2: 0px 2px 6px 2px rgba(0,0,0,.15), 0px 1px 2px 0px rgba(0,0,0,.3);
  --md-sys-elevation-level-3: 0px 1px 3px 0px rgba(0,0,0,.3), 0px 4px 8px 3px rgba(0,0,0,.15);
  --md-sys-elevation-level-4: 0px 2px 3px 0px rgba(0,0,0,.3), 0px 6px 10px 4px rgba(0,0,0,.15);
  --md-sys-elevation-level-5: 0px 4px 4px 0px rgba(0,0,0,.3), 0px 8px 12px 6px rgba(0,0,0,.15);
}
/* --- END OF THEME DEFINITION --- */


/* --- RESET & BASE --- */
html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}
h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}
ul{list-style:none}
button,input,select,textarea{margin:0; font-family: inherit;}
html{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
*,*:before,*:after{box-sizing:inherit}
img,embed,object,audio{height:auto;max-width:100%} /* video handled separately */
iframe{border:0}
table{border-collapse:collapse;border-spacing:0}
td,th{padding:0;text-align:left}

body{
  font-family: var(--md-sys-font-family-plain);
  background-color: var(--md-sys-color-background);
  color: var(--md-sys-color-on-background);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.5;
}

/* --- APP LAYOUT & HEADER --- */
.app__layout{
  position:absolute;
  width:100%;
  height:100%;
  overflow:hidden;
  background-color: var(--md-sys-color-background); /* Ensure this matches body */
}

.app__header{
  width:100%;
  height: 64px; /* Taller app bar */
  color: var(--md-sys-color-on-surface);
  background-color: var(--md-sys-color-surface); /* Or transparent for more immersive feel */
  display:flex;
  align-items:center;
  position:fixed;
  top:0;left:0;right:0;
  z-index:100; /* Increased z-index */
  padding: 0 16px;
  box-shadow: var(--md-sys-elevation-level-2);
}

.app__header-icon {
  width: 48px; /* Larger touch target */
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-radius: var(--md-sys-shape-corner-full); /* Pill shape */
  position: absolute; /* Keep if design requires it, or integrate into flex flow */
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  transition: background-color 0.2s ease-out;
}
.app__header-icon svg {
  fill: var(--md-sys-color-primary); /* Accent color for icon */
  width: 28px; /* Slightly larger icon */
  height: 28px;
}
.app__header-icon:hover {
  background-color: rgba(var(--md-sys-color-primary-rgb, 105, 221, 255), 0.08); /* Use RGB for alpha if available, else a fixed alpha */
}
.app__header-icon:active{
  background-color: rgba(var(--md-sys-color-primary-rgb, 105, 221, 255), 0.12);
  opacity: 1; /* Remove default opacity dimming if using background feedback */
}

.app__header-title{
  margin-left: 16px; /* Or 72px if icon is not absolute and is first */
  font-family: var(--md-sys-font-family-brand);
  font-size: 22px; /* Material You Title Large */
  font-weight: 500;
  user-select:none;
  color: var(--md-sys-color-on-surface);
}

.app__layout-content{
  height:100%; /* Changed from inherit to ensure it takes full viewport */
  position: relative; /* For positioning elements within */
  overflow: hidden; /* If content scrolls, manage it here */
}

/* --- CAMERA & SCANNER VIEW --- */
video{
  transform:translateX(-50%) translateY(-50%); /* Keeps existing centering logic */
  top:50%;
  left:50%;
  min-width:100%;
  min-height:100%;
  width:auto;
  height:auto;
  position:absolute;
  object-fit: cover; /* Ensures video covers the area */
  z-index: 1; /* Behind UI elements */
}

#camera{opacity:0} /* Keep as is if it's a hidden helper */

/* Redesigned Scanner Viewfinder */
.app__overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  width: clamp(260px, 70vw, 380px); /* Responsive width */
  height: clamp(260px, 70vw, 380px); /* Responsive height, make it square */
  transform: translate(-50%, -50%);
  z-index: 20; /* Above video, below dialogs */
  /* No border or background on app__overlay itself */
}

.app__overlay-frame { /* This can be removed if app__scanner-img is styled as the frame */
  display: none; /* We'll use the SVG for the frame */
}

.app__scanner-img { /* This SVG will be our main viewfinder frame */
  display: block; /* Make it visible */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 21;
}
.app__scanner-img g path {
  fill: var(--md-sys-color-primary); /* Vibrant accent for scanner corners */
  stroke: var(--md-sys-color-background); /* Thin stroke for definition against video */
  stroke-width: 8px; /* Make stroke thicker for more visual separation, adjust as needed */
  /* The original SVG is complex; for simplicity, this targets all paths.
     A better SVG would have distinct elements for corners.
     Let's assume the existing SVG structure's "Shape" ID is the one for corners. */
}
.app__scanner-img #Shape {
  fill: var(--md-sys-color-primary);
  /* Opacity can be added for a semi-transparent effect if desired */
  /* filter: drop-shadow(0 0 8px var(--md-sys-color-primary)); /* Optional glow */
}


/* Animated Scanner Line */
.custom-scanner{
  width: 90%; /* Relative to .app__overlay */
  height: 4px; /* Thicker line */
  background: linear-gradient(90deg, transparent, var(--md-sys-color-primary), transparent); /* Softer edges */
  position:absolute;
  left: 5%; /* Centered */
  margin: auto; /* Not needed with left:5% and width:90% */
  box-shadow: 0 0 10px var(--md-sys-color-primary), 0 0 5px var(--md-sys-color-primary); /* Glow effect */
  border-radius: var(--md-sys-shape-corner-full);
  display: block; /* Make it visible */
  z-index: 22; /* Above frame, below potential text */
  animation: scanner 3s infinite ease-in-out; /* Smoother easing */
}

@-webkit-keyframes scanner{0%{bottom:90%; opacity: 0.7;} 50%{bottom:10%; opacity: 1;} 100%{bottom:90%; opacity: 0.7;}}
@keyframes scanner{0%{bottom:90%; opacity: 0.7;} 50%{bottom:10%; opacity: 1;} 100%{bottom:90%; opacity: 0.7;}}

.app__help-text{
  color: var(--md-sys-color-on-primary-container); /* Readable on dark overlay/video */
  background-color: rgba(var(--md-sys-color-primary-container-rgb, 0, 77, 97), 0.8); /* Use RGB for alpha */
  position:absolute;
  bottom: -60px; /* Position below the scanner overlay */
  left:50%;
  transform: translateX(-50%);
  font-size: 16px;
  padding: 8px 16px;
  border-radius: var(--md-sys-shape-corner-medium);
  text-align:center;
  user-select:none;
  display: block; /* Or flex if needed */
  z-index: 22;
  box-shadow: var(--md-sys-elevation-level-1);
}


/* --- DIALOGS (Common styles first) --- */
.app__dialog-overlay, .app__infodialog-overlay {
  position:fixed;
  left:0;right:0;bottom:0;top:0;
  background: var(--md-sys-color-scrim);
  z-index:200; /* High z-index */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0s 0.3s;
}
.app__dialog-overlay:not(.app__dialog--hide), /* When dialog is shown */
.app__infodialog-overlay:not(.app__infodialog--hide) {
  opacity: 1;
  visibility: visible;
  transition-delay: 0s;
}


.app__dialog, .app__infodialog {
  background-color: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
  width: clamp(320px, 90vw, 480px); /* Responsive width */
  min-height: 180px; /* Let content define height mostly */
  height: auto; /* Auto height */
  border-radius: var(--md-sys-shape-corner-extra-large); /* Expressive rounding */
  display:flex; /* Keep flex for content structure */
  flex-direction: column;
  position:fixed; /* Changed from absolute for easier centering */
  left:50%;
  top:50%;
  transform: translate(-50%, -50%) scale(0.95);
  margin:auto; /* Not needed with fixed and transform */
  box-shadow: var(--md-sys-elevation-level-4);
  z-index:201;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0.3s;
}

.app__dialog:not(.app__dialog--hide),
.app__infodialog:not(.app__infodialog--hide) {
  opacity: 1;
  visibility: visible;
  transform: translate(-50%, -50%) scale(1);
  transition-delay: 0s;
}


.app__dialog-content, .app__infodialog-content {
  width:100%;
  padding: 24px; /* Generous padding */
  flex-grow: 1;
}

.app__dialog-content h1, .app__infodialog h1 {
  font-family: var(--md-sys-font-family-brand);
  color: var(--md-sys-color-on-surface);
  margin-top:0; /* No top margin if padding handles it */
  margin-bottom: 16px;
  font-weight:500;
  font-size: 24px; /* Headline Small */
}
.app__infodialog p {
  font-size: 16px; /* Body Large */
  line-height: 1.6;
  color: var(--md-sys-color-on-surface-variant);
}

.app__infodialog-subcontent{margin-top:24px;}
.app__infodialog-subcontent a{
  color: var(--md-sys-color-primary);
  text-decoration: none;
  font-weight: 500;
}
.app__infodialog-subcontent a:hover{ text-decoration: underline; }
.app__infodialog-subcontent p:not(:first-child){margin-top:12px;}

.app__dialog input[type="text"]{
  width:100%;
  height: 56px; /* Standard Material height */
  border:0;
  border-bottom: 2px solid var(--md-sys-color-outline);
  outline:0;
  font-size:16px; /* Input text */
  color: var(--md-sys-color-on-surface);
  background-color: transparent;
  padding: 16px 0px 8px 0px; /* Adjust for label if it were present */
  transition: border-color 0.2s ease;
}
.app__dialog input[type="text"]:focus{
  border-bottom-color: var(--md-sys-color-primary);
}

.app__dialog-actions, .app__infodialog-actions {
  display:flex; /* Use flex for button alignment */
  justify-content: flex-end; /* Align buttons to the right */
  padding: 8px 24px 24px 24px; /* Padding around actions */
  gap: 8px; /* Space between buttons */
  /* Removed absolute positioning, part of flex column now */
}

/* Button Styling (Material You Text Buttons) */
.app__infodialog-open, .app__infodialog-close,
.app__dialog-open, .app__dialog-close {
  border:0;
  height: 40px;
  min-width: 64px; /* Minimum width for touch target */
  padding: 0 16px; /* Horizontal padding */
  font-size: 14px; /* Label Large */
  background:transparent;
  color: var(--md-sys-color-primary); /* Accent color for text buttons */
  font-weight:500;
  outline:0;
  cursor:pointer;
  border-radius: var(--md-sys-shape-corner-full); /* Pill shape */
  text-transform: uppercase; /* Or none for softer look */
  transition: background-color 0.2s ease;
}
.app__infodialog-open:hover, .app__infodialog-close:hover,
.app__dialog-open:hover, .app__dialog-close:hover {
  background-color: rgba(var(--md-sys-color-primary-rgb, 105, 221, 255), 0.08);
}
.app__infodialog-open:active, .app__infodialog-close:active,
.app__dialog-open:active, .app__dialog-close:active{
  background-color: rgba(var(--md-sys-color-primary-rgb, 105, 221, 255), 0.12);
  opacity: 1;
}
.app__dialog-open{display:inline-flex;} /* Make Open button visible and flex for alignment */


/* --- FAB (Floating Action Button for Select Photos) --- */
.app__select-photos {
  width: 56px;
  height: 56px;
  cursor: pointer;
  position: fixed;
  bottom: 32px; /* More padding from edge */
  right: 32px;
  border-radius: var(--md-sys-shape-corner-large); /* Slightly less than full for "squircle" */
  background-color: var(--md-sys-color-primary-container);
  color: var(--md-sys-color-on-primary-container);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--md-sys-elevation-level-3);
  z-index: 90;
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s ease, background-color 0.2s ease;
}
.app__select-photos svg {
  fill: var(--md-sys-color-on-primary-container); /* Ensure icon color matches */
  width: 28px;
  height: 28px;
}
.app__select-photos:hover {
  box-shadow: var(--md-sys-elevation-level-4);
  background-color: var(--md-sys-color-primary); /* Change to primary on hover for more pop */
  color: var(--md-sys-color-on-primary);
}
.app__select-photos:hover svg {
  fill: var(--md-sys-color-on-primary);
}
.app__select-photos:active {
  transform: scale(0.95);
  box-shadow: var(--md-sys-elevation-level-2);
  opacity: 1;
}
input[type='file']{display:none} /* Keep as is */

/* --- SNACKBAR --- */
.app__snackbar{
  position:fixed;
  bottom: 24px; /* More spacing */
  left: 50%; /* Centered */
  transform: translateX(-50%);
  pointer-events:none;
  z-index:300; /* Highest z-index */
  display: flex;
  flex-direction: column-reverse; /* New messages appear on top if multiple */
  align-items: center;
}

.app__snackbar-msg{
  width: auto; /* Auto width based on content */
  min-width: 280px; /* Minimum width */
  max-width: 560px; /* Max width */
  min-height: 48px;
  background-color: var(--md-sys-color-inverse-surface); /* Material Snackbar color */
  color: var(--md-sys-color-inverse-on-surface);
  border-radius: var(--md-sys-shape-corner-small); /* Standard snackbar rounding */
  box-shadow: var(--md-sys-elevation-level-3);
  display:flex;
  align-items:center;
  justify-content:space-between; /* If actions were present */
  font-size:14px; /* Body medium */
  font-weight:400;
  padding: 14px 16px;
  word-break:break-word; /* Changed from break-all for better readability */
  margin-bottom: 8px; /* Spacing between snackbars */
  pointer-events: all; /* Allow interaction if needed */
  opacity: 0;
  transform: translateY(20px) scale(0.95);
  transition: opacity .3s ease, transform .3s ease;
}
.app__snackbar-msg:not(.app__snackbar--hide) { /* For showing */
  opacity: 1;
  transform: translateY(0) scale(1);
}
.app__snackbar--hide{ /* This class now controls individual message hiding if logic allows */
  opacity:0 !important; /* Ensure it hides */
  transform: translateY(20px) scale(0.95) !important;
  transition-delay: 0s !important; /* Hide immediately */
  margin-bottom: 0; /* Collapse margin when hidden */
  height: 0; /* Collapse height */
  padding-top: 0; padding-bottom: 0; /* Collapse padding */
  overflow: hidden;
}


/* --- MISC & UTILITIES --- */
.custom-menu-icon{ /* This was used for title color before, remove if not needed */
  display: none; /* Example: if title color is handled by .app__header-title */
}
.custom-title{ color: var(--md-sys-color-on-surface); } /* Already handled by header */

/* .custom-btn was a FAB-like button, now replaced by .app__select-photos, can remove if unused */
.custom-btn { display: none; }
.custom-fab-icon { display: none; }


.custom-msg{ /* This seems like a general message area, style if used, or remove */
  text-align:center;
  width:90%;
  max-width: 400px;
  height:auto; /* Fit content */
  overflow:auto;
  margin:auto;
  position:absolute; /* Center it if it's a fullscreen message */
  top:50%;left:50%;bottom:auto;right:auto;
  transform: translate(-50%, -50%);
  font-size:18px;
  color: var(--md-sys-color-on-surface-variant);
  padding: 24px;
  background-color: var(--md-sys-color-surface-variant);
  border-radius: var(--md-sys-shape-corner-large);
  box-shadow: var(--md-sys-elevation-level-2);
}

#list li{ /* If used for displaying scanned results list */
  list-style-type:none;
  text-decoration:underline; /* Might want to change this */
  color: var(--md-sys-color-primary); /* Link-like color */
  padding: 8px 0;
  cursor: pointer;
}
#list li:hover {
  text-decoration: none;
  background-color: rgba(var(--md-sys-color-primary-rgb, 105, 221, 255), 0.08);
}

.custom-copy-btn{opacity:0} /* Keep if used, might need styling */
.hide{display:none !important} /* Utility class */

.no-support{
  font-size:20px;
  text-align:center;
  color: var(--md-sys-color-on-background);
  padding: 40px 20px;
}

.camera__icon,.focus__icon{ /* Style if these become visible features */
  position:relative;
  left:10px;
  display:none; /* Current state */
  fill: var(--md-sys-color-primary);
}

#frame{ /* If used for displaying image from file, ensure it's styled */
  width:auto;height:auto;
  max-width: 100%;
  max-height: 80vh;
  display: block;
  margin: 20px auto;
  border-radius: var(--md-sys-shape-corner-medium);
}

.app__version{
  position:fixed; /* Keep it out of the way */
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  font-size:12px;
  color: var(--md-sys-color-outline); /* Muted color */
  display:inline-block;
  z-index: 5;
}


/* --- MEDIA QUERIES (Adjustments for smaller screens if needed) --- */
@media screen and (max-width:480px){
  .app__infodialog, .app__dialog {
    width: calc(100% - 32px); /* Full width with some margin */
    border-radius: var(--md-sys-shape-corner-large); /* Slightly smaller radius for edge-to-edge feel */
  }
  .app__infodialog-content, .app__dialog-content {
    padding: 20px; /* Slightly less padding */
  }
  .app__header-title {
    font-size: 20px;
  }
  .app__select-photos {
    bottom: 24px;
    right: 24px;
  }
  .app__help-text {
    bottom: -50px; /* Adjust if needed */
    font-size: 14px;
  }
}

/* Add placeholder RGB versions for colors used with opacity, if not available from a preprocessor */
/* This is a manual step if you don't have JS or a build tool to generate these */
/* Example:
:root {
  ...
  --md-sys-color-primary-rgb: 105, 221, 255;
  --md-sys-color-primary-container-rgb: 0, 77, 97;
  ...
}
*/
