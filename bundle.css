/* --- START OF ORIGINAL RESET (Minor changes for font and box-sizing might be done below) --- */
html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}ul{list-style:none}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}img,embed,object,audio{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0;text-align:left}
/* --- END OF ORIGINAL RESET --- */

/* --- NATIVE IOS INSPIRED STYLES --- */

:root {
  --ios-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

  /* Light Theme Palette */
  --ios-color-system-background: #F9F9F9; /* Off-white, common iOS background */
  --ios-color-system-grouped-background: #FFFFFF; /* For elements like alerts, cards */
  --ios-color-label: #000000;
  --ios-color-secondary-label: rgba(60, 60, 67, 0.6);
  --ios-color-tertiary-label: rgba(60, 60, 67, 0.3);
  --ios-color-placeholder-text: rgba(60, 60, 67, 0.3);

  --ios-color-system-blue: #007AFF;
  --ios-color-system-red: #FF3B30;
  --ios-color-system-green: #34C759; /* Scanner line */
  --ios-color-system-gray-2: #AEAEB2;
  --ios-color-system-gray-4: #D1D1D6;
  --ios-color-system-gray-5: #E5E5EA;
  --ios-color-system-gray-6: #F2F2F7;

  --ios-color-separator: rgba(60, 60, 67, 0.29);
  --ios-color-scrim: rgba(0, 0, 0, 0.35); /* Scrim for behind alerts */
  --ios-blur-radius: 12px; /* For backdrop-filter */

  --ios-corner-radius-small: 8px;
  --ios-corner-radius-medium: 13px; /* Common for alerts/buttons */
  --ios-corner-radius-large: 20px;

  --ios-transition-duration: 0.2s;
  --ios-transition-timing: ease-out;
}

/* Remove default focus outline for mouse/touch, provide alternative for keyboard */
*:focus {
  outline: none;
}
*:focus-visible {
  outline: 2px solid var(--ios-color-system-blue);
  outline-offset: 2px;
}
/* More specific for buttons/links if needed, but global *:focus should cover it */
button:focus-visible, a:focus-visible, input:focus-visible {
  outline: 2px solid var(--ios-color-system-blue);
  outline-offset: 1px; /* Closer offset for these elements */
}


body {
  font-family: var(--ios-font-family);
  font-size: 17px; /* Default iOS body font size */
  font-weight: 400;
  color: var(--ios-color-label);
  background-color: var(--ios-color-system-background);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.4;
  overflow: hidden;
}

.app__layout {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* --- Header / Navigation Bar --- */
.app__header {
  width: 100%;
  height: 50px; /* iOS nav bar height (can vary, ~44-56pt) */
  color: var(--ios-color-label);
  /* background-color: var(--ios-color-system-background); Often translucent or blurred */
  background-color: rgba(249, 249, 249, 0.85); /* Translucent white */
  backdrop-filter: blur(var(--ios-blur-radius));
  -webkit-backdrop-filter: blur(var(--ios-blur-radius));
  border-bottom: 0.5px solid var(--ios-color-separator);
  display: flex;
  align-items: center;
  justify-content: flex-end; /* Align items to the right (like the info icon) */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10;
  padding: 0 16px;
  box-sizing: border-box;
}

.app__header-icon { /* "About" icon button */
  width: auto; /* Fit content */
  height: 44px; /* iOS touch target height */
  padding: 0 8px; /* Some padding for the icon */
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  position: static; /* No longer absolute positioned */
  transform: none;
  border-radius: var(--ios-corner-radius-small);
  transition: background-color var(--ios-transition-duration) var(--ios-transition-timing);
}
.app__header-icon svg {
  fill: var(--ios-color-system-blue); /* iOS tint color for actionable icons */
  width: 24px; /* Adjust size as needed */
  height: 24px;
}
.app__header-icon:active { /* iOS active state for buttons */
  background-color: var(--ios-color-system-gray-5);
  opacity: 1;
}
.app__header-title { /* If a title was present, it would typically be centered */
  /* position: absolute; left: 50%; transform: translateX(-50%); font-weight: 600; */
  display: none;
}

.app__layout-content {
  height: 100%;
  position: relative;
  padding-top: 50px; /* Account for fixed header */
  box-sizing: border-box;
}

/* --- Button (Select Photos - adapted from FAB) --- */
.app__select-photos {
  position: fixed;
  right: 20px;
  bottom: 20px;
  background-color: var(--ios-color-system-blue);
  color: #FFFFFF;
  border-radius: var(--ios-corner-radius-medium); /* iOS style rounding */
  border: 0;
  width: 50px; /* iOS-like button size */
  height: 50px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1), 0 1px 3px rgba(0,0,0,0.08); /* Subtle iOS shadow */
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform var(--ios-transition-duration) var(--ios-transition-timing),
              background-color var(--ios-transition-duration) var(--ios-transition-timing);
}
.app__select-photos:active {
  transform: scale(0.95);
  background-color: color-mix(in srgb, var(--ios-color-system-blue) 85%, black);
  opacity: 1;
}
.app__select-photos svg {
  fill: #FFFFFF;
  width: 26px;
  height: 26px;
}
.custom-btn { display: none; } /* Hide old FAB */


/* --- Video Background --- */
video {
  transform: translateX(-50%) translateY(-50%);
  top: 50%; left: 50%; min-width: 100%; min-height: 100%;
  width: auto; height: auto; position: absolute; z-index: -1; object-fit: cover;
}

.hide { display: none !important; }

/* --- Scanner Viewfinder & Animation --- */
.app__overlay {
  position: absolute; /* Relative to layout-content */
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%); /* Centering */
  width: 250px; /* Typical iOS scanner view is squarish */
  height: 250px;
  z-index: 1;
  pointer-events: none;
}
.app__scanner-img { display: none !important; } /* Hide the old SVG frame */

/* iOS-style scanner frame using pseudo-elements for rounded corners */
.app__overlay::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--ios-corner-radius-large); /* iOS specific rounded corners */
  /* "Cutout" effect using box-shadow */
  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.55); /* Darker overlay for better camera contrast */
}
/* Optional: Corner guides (simpler than full SVG) */
.app__overlay::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    inset: 0;
    border-radius: var(--ios-corner-radius-large);
    border: 3px solid rgba(255, 255, 255, 0.7); /* White border for the scan area */
    box-sizing: border-box;
}


.custom-scanner { /* The animated line */
  width: calc(100% - 20px); /* Span inside the frame */
  height: 2.5px;
  background: var(--ios-color-system-green);
  position: absolute;
  box-shadow: 0 0 8px var(--ios-color-system-green), 0 0 12px var(--ios-color-system-green);
  display: block !important;
  left: 50%;
  transform: translateX(-50%);
  margin: 0;
  border-radius: 2px;
  z-index: 2;
  animation: scanner 2.5s infinite ease-in-out;
}

@keyframes scanner {
  0% { top: 15%; opacity: 0.8; }
  50% { top: 85%; opacity: 1; }
  100% { top: 15%; opacity: 0.8; }
}
@-webkit-keyframes scanner { /* For Safari */
  0% { top: 15%; opacity: 0.8; }
  50% { top: 85%; opacity: 1; }
  100% { top: 15%; opacity: 0.8; }
}


/* --- Toast/Temporary Notice (Adapted from Snackbar) --- */
.app__snackbar {
  position: fixed;
  /* iOS notices can appear top or bottom, let's try bottom */
  bottom: 70px; /* Above where a tab bar might be, or select photos button */
  left: 50%;
  transform: translateX(-50%);
  width: auto; /* Fit content */
  max-width: calc(100% - 40px);
  pointer-events: none;
  z-index: 10000;
  display: flex; /* Keep for alignment */
  justify-content: center;
}

.app__snackbar-msg {
  width: auto;
  min-width: 0; /* Allow it to be small for short messages */
  padding: 10px 18px; /* iOS like padding */
  background-color: rgba(40, 40, 40, 0.85); /* Dark translucent background */
  backdrop-filter: blur(var(--ios-blur-radius));
  -webkit-backdrop-filter: blur(var(--ios-blur-radius));
  color: #FFFFFF; /* White text */
  border-radius: var(--ios-corner-radius-large); /* Very rounded, like iOS toasts */
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-size: 14px; /* Smaller text for toasts */
  font-weight: 500;
  transition: opacity 0.3s ease-out, transform 0.3s ease-out;
  pointer-events: all;
  opacity: 0;
  transform: translateY(15px) scale(0.95);
}
/* JS will need to remove .app__snackbar--hide to show it */
.app__snackbar:not(.app__snackbar--hide) .app__snackbar-msg {
    opacity: 1;
    transform: translateY(0px) scale(1);
}


/* --- Alerts (Dialogs) --- */
.app__dialog-overlay, .app__infodialog-overlay {
  position: fixed;
  inset: 0;
  background: var(--ios-color-scrim);
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--ios-transition-duration) var(--ios-transition-timing);
  /* iOS alerts don't always blur the entire background, but a subtle one can be nice */
  /* backdrop-filter: blur(3px); */
  /* -webkit-backdrop-filter: blur(3px); */
}
.app__dialog-overlay:not(.app__dialog--hide),
.app__infodialog-overlay:not(.app__infodialog--hide) {
  opacity: 1;
  pointer-events: auto;
}

.app__infodialog, .app__dialog { /* Styled like iOS Alerts */
  z-index: 1001;
  background-color: var(--ios-color-system-grouped-background); /* Opaque white */
  color: var(--ios-color-label);
  width: 270px; /* Standard iOS alert width */
  max-width: calc(100% - 40px);
  height: auto;
  border-radius: var(--ios-corner-radius-medium);
  display: flex;
  flex-direction: column;
  align-items: center; /* Center content */
  text-align: center;
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(1.1); /* iOS zoom-in effect */
  margin: 0;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15), 0 0 0 0.5px rgba(0,0,0,0.1);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease-out, transform 0.25s ease-out;
  overflow: hidden;
}

.app__infodialog:not(.app__infodialog--hide),
.app__dialog:not(.app__dialog--hide) {
  opacity: 1;
  pointer-events: auto;
  transform: translate(-50%, -50%) scale(1);
}

.app__dialog-content, .app__infodialog-content {
  width: 100%;
  padding: 20px 16px 0 16px; /* iOS alert padding */
  box-sizing: border-box;
  flex-grow: 1;
}

.app__infodialog-subcontent {
  margin-top: 4px; /* Less space in alerts */
  font-size: 13px; /* Smaller body text in alerts */
  color: var(--ios-color-label); /* Standard text, not secondary for main message */
  line-height: 1.3;
  padding-bottom: 20px; /* Space before buttons if no input */
}
.app__infodialog-subcontent a {
  color: var(--ios-color-system-blue);
  text-decoration: none;
  font-weight: normal;
}
.app__infodialog-subcontent a:active {
  text-decoration: underline;
}
.app__infodialog-subcontent p:not(:first-child) {
  margin-top: 8px;
}

.app__dialog-content h1, .app__infodialog h1 { /* Alert Title */
  margin-top: 0;
  margin-bottom: 4px; /* Less space between title and message */
  font-weight: 600; /* Bold title */
  font-size: 17px;
  line-height: 1.3;
  color: var(--ios-color-label);
}

/* Dialog Input Field (not typical in simple alerts, but if used) */
.app__dialog input[type="text"] {
  width: calc(100% - 32px); /* Indent input within the alert */
  margin: 12px auto 20px auto; /* Spacing for input */
  height: 36px; /* iOS input height */
  border: 0.5px solid var(--ios-color-system-gray-4);
  border-radius: var(--ios-corner-radius-small);
  outline: 0;
  font-family: var(--ios-font-family);
  font-size: 15px;
  color: var(--ios-color-label);
  padding: 0 10px;
  box-sizing: border-box;
  background-color: var(--ios-color-system-gray-6);
}
.app__dialog input[type="text"]::placeholder {
    color: var(--ios-color-placeholder-text);
}
.app__dialog input[type="text"]:focus {
  border-color: var(--ios-color-system-blue);
  background-color: #FFFFFF;
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--ios-color-system-blue) 20%, transparent);
}

/* Dialog Actions (Buttons) */
.app__dialog-actions, .app__infodialog-actions {
  display: flex;
  width: 100%; /* Full width for buttons */
  border-top: 0.5px solid var(--ios-color-separator);
  margin-top: 0; /* No margin, border is separator */
  padding: 0; /* Reset padding */
}

.app__dialog-actions button, .app__infodialog-actions button {
  flex: 1; /* Buttons share space equally */
  border: 0;
  height: 44px; /* Standard iOS button height in alerts */
  padding: 0 5px;
  font-family: var(--ios-font-family);
  font-size: 17px;
  font-weight: 400; /* Regular weight for alert buttons */
  background: transparent;
  color: var(--ios-color-system-blue); /* Default action color */
  outline: 0;
  cursor: pointer;
  border-radius: 0; /* No individual rounding, part of the alert box */
  text-transform: none;
  transition: background-color var(--ios-transition-duration) var(--ios-transition-timing);
}
/* Separator between buttons if more than one */
.app__dialog-actions button:not(:first-child),
.app__infodialog-actions button:not(:first-child) {
  border-left: 0.5px solid var(--ios-color-separator);
}
/* Active state for alert buttons */
.app__dialog-actions button:active, .app__infodialog-actions button:active {
  background-color: var(--ios-color-system-gray-5);
}

/* Make the primary action button bold if needed */
.app__dialog-open {
  font-weight: 600; /* Bold for default/primary action */
  /* display: none; Retain if JS depends on it */
}
.app__dialog-close { /* No specific style needed unless destructive */
  /* If destructive: color: var(--ios-color-system-red); */
}
.app__infodialog-close { /* Single button, can be bold or regular */
   font-weight: 600;
}


/* --- Helper texts and other small UI elements --- */
.app__help-text {
  color: var(--ios-color-secondary-label);
  position: absolute;
  bottom: 85px; /* Position above the select photos button */
  font-size: 13px; /* Smaller caption text */
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
  user-select: none;
  padding: 6px 12px;
  /* background-color: rgba(230, 230, 230, 0.8); */
  /* border-radius: var(--ios-corner-radius-medium); */
  z-index: 5;
  display: block;
}

input[type='file'] { display: none; }

.app__version {
  position: absolute;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 11px;
  color: var(--ios-color-tertiary-label);
  opacity: 0.8;
}

/* --- Media Queries (iOS designs are generally adaptive, less dramatic changes) --- */
@media screen and (max-width: 380px) { /* For very small iPhones */
  .app__overlay { width: 230px; height: 230px; }
  .app__infodialog, .app__dialog { width: 260px; } /* Slightly narrower alert */
  .app__dialog-content h1, .app__infodialog h1 { font-size: 16px; }
  .app__dialog-content, .app__infodialog-content { padding: 18px 16px 0 16px; }
  .app__infodialog-subcontent { font-size: 12px; padding-bottom: 18px; }
  .app__help-text { font-size: 12px; }
}
