/* --- MINECRAFT INSPIRED THEME --- */

@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

:root {
  --mc-font-pixel: 'Press Start 2P', cursive;

  /* Minecraft UI Palette */
  --mc-color-bg-main: #3E3E3E; /* Dark Stone / Deepslate variant */
  --mc-color-surface-elements: #C6C6C6; /* Light Stone (like buttons, dialogs) */
  --mc-color-surface-darker: #5A5A5A; /* Darker Stone for some containers/borders */
  --mc-color-border-outer: #282828; /* Very dark border */
  --mc-color-border-inner-light: #FFFFFF; /* Inner highlight for 3D effect on light surfaces */
  --mc-color-border-inner-medium: #8B8B8B; /* Inner shadow/medium highlight */

  --mc-color-text-on-dark: #E0E0E0;
  --mc-color-text-on-light: #3A3A3A;

  --mc-color-accent-scanner: #55FF55; /* Emerald Green */
  --mc-color-accent-action: #55CDFC; /* Diamond Blue */
  --mc-color-accent-secondary: #FFAA00; /* Gold */

  --mc-pixel-size: 2px; /* Controls the "pixel" thickness of borders */

  /* Remove tap highlight globally */
  -webkit-tap-highlight-color: transparent;
}

/* Basic Reset (from original) - Keep this */
html,body,p,ol,ul,li,dl,dt,dd,blockquote,figure,fieldset,legend,textarea,pre,iframe,hr,h1,h2,h3,h4,h5,h6{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal}ul{list-style:none}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}img,embed,object,audio{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0;text-align:left}

/* General Styling */
body {
  font-family: var(--mc-font-pixel);
  font-size: 10px; /* Pixel fonts work best at small base sizes */
  line-height: 1.4;
  color: var(--mc-color-text-on-dark);
  background-color: var(--mc-color-bg-main);
  image-rendering: pixelated; /* Crucial for sharp pixels */
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden;
}

button, input, textarea, select {
  font-family: var(--mc-font-pixel);
  color: inherit;
  image-rendering: pixelated;
  -webkit-tap-highlight-color: transparent; /* Ensure on all interactive elements */
}
*:focus {
  outline: none; /* Remove default browser outline, we'll add custom */
}

.app__layout {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* --- Common Button Style (Minecraft inventory slot style) --- */
.mc-button {
  background-color: var(--mc-color-surface-elements);
  color: var(--mc-color-text-on-light);
  border: none;
  padding: calc(var(--mc-pixel-size) * 4) calc(var(--mc-pixel-size) * 5);
  text-align: center;
  text-decoration: none;
  display: inline-flex; /* For aligning icon and text */
  align-items: center;
  justify-content: center;
  font-size: 10px;
  cursor: pointer;
  image-rendering: pixelated;
  -webkit-tap-highlight-color: transparent;
  /* Minecraft button border effect */
  box-shadow:
    /* Outer dark border */
    0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer),
    /* Inner lighter highlight */
    inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-light),
    /* Inner darker shadow for depth */
    inset calc(var(--mc-pixel-size) * 2) calc(var(--mc-pixel-size) * 2) 0 0 var(--mc-color-border-inner-medium),
    inset calc(var(--mc-pixel-size) * -2) calc(var(--mc-pixel-size) * -2) 0 0 var(--mc-color-border-inner-medium);
  transition: transform 0.05s linear, box-shadow 0.05s linear; /* Quick, not smooth */
}
.mc-button:active {
  transform: translate(var(--mc-pixel-size), var(--mc-pixel-size)); /* "Pressed in" effect */
  box-shadow:
    0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer),
    inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-medium); /* Darken inner highlight */
}
.mc-button:focus-visible { /* For keyboard navigation */
    box-shadow:
    0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer),
    0 0 0 calc(var(--mc-pixel-size) * 2) var(--mc-color-accent-action), /* Gold outline */
    inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-light),
    inset calc(var(--mc-pixel-size) * 2) calc(var(--mc-pixel-size) * 2) 0 0 var(--mc-color-border-inner-medium),
    inset calc(var(--mc-pixel-size) * -2) calc(var(--mc-pixel-size) * -2) 0 0 var(--mc-color-border-inner-medium);
}


/* --- Header --- */
.app__header {
  width: 100%;
  height: calc(var(--mc-pixel-size) * 20); /* ~40px */
  background-color: var(--mc-color-surface-darker);
  border-bottom: var(--mc-pixel-size) solid var(--mc-color-border-outer);
  display: flex;
  align-items: center;
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 10;
  padding: 0 calc(var(--mc-pixel-size) * 5);
  box-sizing: border-box;
}
.app__header-icon { /* "About" icon button */
  /* Apply common button style */
  composes: mc-button; /* This is a CSS Modules concept, manually apply styles */
  background-color: var(--mc-color-surface-elements);
  color: var(--mc-color-text-on-light);
  border: none;
  padding: 0; /* Control size with width/height */
  width: calc(var(--mc-pixel-size) * 14); /* ~28px */
  height: calc(var(--mc-pixel-size) * 14);
  position: absolute;
  right: calc(var(--mc-pixel-size) * 5);
  top: 50%;
  transform: translateY(-50%);
  /* Minecraft button border effect */
  box-shadow:
    0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer),
    inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-light),
    inset calc(var(--mc-pixel-size) * 1.5) calc(var(--mc-pixel-size) * 1.5) 0 0 var(--mc-color-border-inner-medium),
    inset calc(var(--mc-pixel-size) * -1.5) calc(var(--mc-pixel-size) * -1.5) 0 0 var(--mc-color-border-inner-medium);
}
.app__header-icon:active {
  transform: translateY(-50%) translate(var(--mc-pixel-size), var(--mc-pixel-size));
  box-shadow:
    0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer),
    inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-medium);
}
.app__header-icon svg {
  fill: var(--mc-color-text-on-light);
  width: calc(var(--mc-pixel-size) * 8); /* ~16px */
  height: calc(var(--mc-pixel-size) * 8);
}
.app__header-title { display: none; }

.app__layout-content { height: 100%; position: relative; }

/* --- FAB (Select Image Button) --- */
.app__select-photos {
  /* Apply common button style */
  composes: mc-button;
  background-color: var(--mc-color-surface-elements);
  color: var(--mc-color-text-on-light);
  border: none;
  padding: 0; /* Control size with width/height */
  width: calc(var(--mc-pixel-size) * 22); /* ~44px */
  height: calc(var(--mc-pixel-size) * 22);
  position: fixed;
  right: calc(var(--mc-pixel-size) * 8);
  bottom: calc(var(--mc-pixel-size) * 8);
  z-index: 9999;
  /* Minecraft button border effect - slightly larger */
  box-shadow:
    0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer),
    inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-light),
    inset calc(var(--mc-pixel-size) * 2) calc(var(--mc-pixel-size) * 2) 0 0 var(--mc-color-border-inner-medium),
    inset calc(var(--mc-pixel-size) * -2) calc(var(--mc-pixel-size) * -2) 0 0 var(--mc-color-border-inner-medium);

}
.app__select-photos:active {
  transform: translate(var(--mc-pixel-size), var(--mc-pixel-size));
  box-shadow:
    0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer),
    inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-medium);
}
.app__select-photos svg {
  fill: var(--mc-color-text-on-light);
  width: calc(var(--mc-pixel-size) * 10); /* ~20px */
  height: calc(var(--mc-pixel-size) * 10);
}
.custom-btn, .custom-fab-icon { display: none; }

/* --- Video Background --- */
video {
  transform: translateX(-50%) translateY(-50%); top: 50%; left: 50%;
  min-width: 100%; min-height: 100%; width: auto; height: auto;
  position: absolute; z-index: -1; object-fit: cover;
  image-rendering: pixelated; /* If video itself should appear pixelated */
}

.hide { display: none !important; }

/* --- Scanner Viewfinder & Animation --- */
.app__overlay {
  position: fixed; top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 220px; height: 220px; /* Pixel-friendly size */
  z-index: 1; pointer-events: none;
}
.app__overlay::before { /* The "cutout" overlay */
  content: ''; position: absolute; inset: 0;
  /* Dark, slightly transparent overlay around scanning area */
  box-shadow: 0 0 0 9999px rgba(20, 20, 20, 0.85);
  pointer-events: none;
}
.app__overlay::after { /* The frame border */
  content: ''; position: absolute;
  inset: calc(var(--mc-pixel-size) * -1); /* Border sits just outside cutout */
  border: var(--mc-pixel-size) solid var(--mc-color-accent-scanner); /* Emerald border */
  box-shadow: inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer); /* Inner dark line */
  pointer-events: none;
}
.app__scanner-img, .app__overlay-left, .app__overlay-right { display: none !important; }

.custom-scanner { /* Animated line */
  width: calc(100% - var(--mc-pixel-size) * 6);
  height: var(--mc-pixel-size); /* Thin pixel line */
  background-color: var(--mc-color-accent-scanner);
  position: absolute;
  box-shadow: 0 0 calc(var(--mc-pixel-size) * 2) var(--mc-color-accent-scanner);
  display: block !important;
  left: 50%; transform: translateX(-50%);
  margin: 0; z-index: 2;
  animation: scanner 1.8s infinite steps(12, end); /* Stepped animation */
  image-rendering: pixelated;
}
@keyframes scanner {
  0% { bottom: 90%; } 50% { bottom: 10%; } 100% { bottom: 90%; }
}
@-webkit-keyframes scanner { /* Safari */
  0% { bottom: 90%; } 50% { bottom: 10%; } 100% { bottom: 90%; }
}

/* --- Snackbar / Toast --- */
.app__snackbar {
  position: fixed; bottom: calc(var(--mc-pixel-size) * 6); left: 50%;
  transform: translateX(-50%);
  width: auto; max-width: calc(100% - var(--mc-pixel-size) * 10);
  pointer-events: none; z-index: 10000;
}
.app__snackbar-msg {
  background-color: var(--mc-color-surface-darker);
  color: var(--mc-color-text-on-dark);
  border: var(--mc-pixel-size) solid var(--mc-color-border-outer);
  box-shadow: inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-medium);
  padding: calc(var(--mc-pixel-size) * 3) calc(var(--mc-pixel-size) * 5);
  text-align: center; font-size: 10px;
  margin-bottom: calc(var(--mc-pixel-size) * 3);
  pointer-events: all; image-rendering: pixelated;
  opacity: 0; transform: translateY(calc(var(--mc-pixel-size) * 8));
  transition: opacity 0.1s linear, transform 0.1s linear;
}
.app__snackbar:not(.app__snackbar--hide) .app__snackbar-msg {
  opacity: 1; transform: translateY(0);
}

/* --- Dialogs --- */
.app__dialog-overlay, .app__infodialog-overlay {
  position: fixed; inset: 0;
  background: rgba(0, 0, 0, 0.7); /* Simple dark scrim */
  z-index: 1000; opacity: 0; pointer-events: none;
  transition: opacity 0.1s linear;
}
.app__dialog-overlay:not(.app__dialog--hide),
.app__infodialog-overlay:not(.app__infodialog--hide) {
  opacity: 1; pointer-events: auto;
}

.app__infodialog, .app__dialog {
  z-index: 1001;
  background-color: var(--mc-color-surface-elements);
  color: var(--mc-color-text-on-light);
  width: calc(100% - var(--mc-pixel-size) * 12);
  max-width: 300px; /* Smaller max-width for dialogs */
  height: auto;
  border: none; /* Custom border with box-shadow */
  box-shadow: /* Minecraft container/inventory style border */
    0 0 0 var(--mc-pixel-size) var(--mc-color-border-outer), /* Outer dark */
    inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-light), /* Inner light */
    inset calc(var(--mc-pixel-size) * 2) calc(var(--mc-pixel-size) * 2) 0 0 var(--mc-color-border-inner-medium), /* Inner shadow top-left */
    inset calc(var(--mc-pixel-size) * -2) calc(var(--mc-pixel-size) * -2) 0 0 var(--mc-color-border-inner-medium); /* Inner shadow bottom-right */
  display: flex; flex-direction: column;
  position: fixed; left: 50%; top: 50%;
  transform: translate(-50%, -50%) scale(0.95);
  margin: 0; opacity: 0; pointer-events: none;
  transition: opacity 0.1s linear, transform 0.1s linear;
  image-rendering: pixelated;
}
.app__infodialog:not(.app__infodialog--hide),
.app__dialog:not(.app__dialog--hide) {
  opacity: 1; pointer-events: auto; transform: translate(-50%, -50%) scale(1);
}

.app__dialog-content, .app__infodialog-content {
  width: 100%;
  padding: calc(var(--mc-pixel-size) * 6);
  box-sizing: border-box; flex-grow: 1;
}
.app__infodialog-subcontent {
  margin-top: calc(var(--mc-pixel-size) * 4); font-size: 10px;
  color: var(--mc-color-text-on-light); line-height: 1.5;
}
.app__infodialog-subcontent a {
  color: var(--mc-color-accent-action); text-decoration: none;
}
.app__infodialog-subcontent a:hover { color: var(--mc-color-accent-scanner); }
.app__infodialog-subcontent p:not(:first-child) { margin-top: calc(var(--mc-pixel-size) * 3); }

.app__dialog-content h1, .app__infodialog h1 {
  margin-top: 0; margin-bottom: calc(var(--mc-pixel-size) * 5);
  font-size: 12px; line-height: 1.2;
  color: var(--mc-color-text-on-light); text-align: center;
}

/* Dialog Input Field */
.app__dialog input[type="text"] {
  width: 100%;
  height: calc(var(--mc-pixel-size) * 15);
  border: var(--mc-pixel-size) solid var(--mc-color-border-outer);
  outline: 0; font-size: 10px;
  color: var(--mc-color-text-on-dark); /* Text on dark input background */
  padding: 0 calc(var(--mc-pixel-size) * 3);
  box-sizing: border-box;
  background-color: #303030; /* Dark input field background */
  box-shadow: inset 0 calc(var(--mc-pixel-size) * 0.5) 0 0 var(--mc-color-border-inner-medium); /* Inner top shadow */
  image-rendering: pixelated;
  -webkit-tap-highlight-color: transparent;
}
.app__dialog input[type="text"]::placeholder { color: #787878; opacity: 1; }
.app__dialog input[type="text"]:focus {
  border-color: var(--mc-color-accent-action);
  box-shadow: inset 0 calc(var(--mc-pixel-size) * 0.5) 0 0 var(--mc-color-border-inner-medium),
              0 0 0 var(--mc-pixel-size) var(--mc-color-accent-action); /* Outer gold glow */
}

/* Dialog Actions (Buttons) */
.app__dialog-actions, .app__infodialog-actions {
  display: flex; justify-content: center;
  gap: calc(var(--mc-pixel-size) * 3);
  padding: 0 calc(var(--mc-pixel-size) * 6) calc(var(--mc-pixel-size) * 6);
  width: 100%; box-sizing: border-box;
  margin-top: calc(var(--mc-pixel-size) * 6);
}
.app__dialog-actions button, .app__infodialog-actions button {
  /* Apply common button style */
  composes: mc-button;
  flex-grow: 1;
  height: calc(var(--mc-pixel-size) * 16);
  padding: 0 calc(var(--mc-pixel-size) * 3);
  font-size: 10px;
  text-transform: none; /* Or uppercase if preferred */
}
/* Specific button styling if Open is different */
.app__dialog-open {
  /* background-color: var(--mc-color-accent-action); */
  /* color: var(--mc-color-text-on-dark); */
}
.app__infodialog-close { max-width: 100%; }


/* --- Helper texts and other small UI elements --- */
.app__help-text {
  color: var(--mc-color-text-on-dark);
  position: absolute;
  bottom: calc(var(--mc-pixel-size) * 8 + 44px + var(--mc-pixel-size) * 4); /* Above FAB */
  font-size: 9px; /* Very small for pixel aesthetic */
  left: 50%; transform: translateX(-50%);
  text-align: center; user-select: none;
  padding: calc(var(--mc-pixel-size) * 2) calc(var(--mc-pixel-size) * 4);
  background-color: var(--mc-color-surface-darker);
  border: var(--mc-pixel-size) solid var(--mc-color-border-outer);
  box-shadow: inset 0 0 0 var(--mc-pixel-size) var(--mc-color-border-inner-medium);
  z-index: 5; display: block;
  max-width: 90%; line-height: 1.3;
}

input[type='file'] { display: none; }

.app__version {
  position: absolute; bottom: calc(var(--mc-pixel-size) * 2); left: 50%;
  transform: translateX(-50%); font-size: 8px;
  color: #7A7A7A; opacity: 0.8;
}

/* --- Media Queries (Optional, pixel UIs often scale well) --- */
@media screen and (max-width: 360px) { /* For very small screens */
  .app__overlay { width: 180px; height: 180px; }
  .app__help-text { font-size: 8px; padding: var(--mc-pixel-size) calc(var(--mc-pixel-size) * 3); }
  .app__dialog-actions { flex-direction: column; }
  .app__dialog-actions button { width: 100%; }
}
